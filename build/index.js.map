{"version":3,"sources":["../src/server/index.js"],"names":["app","use","bodyParser","json","urlencoded","extended","set","express","static","protect","clubRouter","familyRouter","pinRouter","studentRouter","timesheetRouter","timestampRouter","userRouter","post","signup","signin","get","req","res","sendFile","path","join","__dirname","err","status","send","start","listen","config","port","handleListen","console","log","error"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;AACA;;AACA;;AACA;;AAEA;;AACA;;AAEA;;AACA;;AACA;;AACA;;AACA;;AACA;;AAEA;;AACA;;;;;;;;AAEO,IAAMA,GAAG,GAAG,uBAAZ;;AAEPA,GAAG,CAACC,GAAJ,CAAQ,oBAAR;AACAD,GAAG,CAACC,GAAJ,CAAQC,oBAAWC,IAAX,EAAR;AACAH,GAAG,CAACC,GAAJ,CAAQC,oBAAWE,UAAX,CAAsB;AAAEC,EAAAA,QAAQ,EAAE;AAAZ,CAAtB,CAAR;AACAL,GAAG,CAACC,GAAJ,CAAQ,qBAAO,KAAP,CAAR;AACAD,GAAG,CAACM,GAAJ,CAAQ,aAAR,EAAuB,CAAvB,E,CAEA;;AACEN,GAAG,CAACC,GAAJ,CAAQM,iBAAQC,MAAR,CAAe,OAAf,CAAR,E,CAEF;;AAEAR,GAAG,CAACC,GAAJ,CAAQ,WAAR,EAAqBQ,aAArB,EAA8BC,aAA9B;AACAV,GAAG,CAACC,GAAJ,CAAQ,aAAR,EAAuBQ,aAAvB,EAAgCE,eAAhC;AACAX,GAAG,CAACC,GAAJ,CAAQ,UAAR,EAAoBQ,aAApB,EAA6BG,YAA7B;AACAZ,GAAG,CAACC,GAAJ,CAAQ,cAAR,EAAwBY,gBAAxB;AACAb,GAAG,CAACC,GAAJ,CAAQ,gBAAR,EAA0BQ,aAA1B,EAAmCK,kBAAnC;AACAd,GAAG,CAACC,GAAJ,CAAQ,gBAAR,EAA0BQ,aAA1B,EAAmCM,kBAAnC;AACAf,GAAG,CAACC,GAAJ,CAAQ,WAAR,EAAqBQ,aAArB,EAA8BO,aAA9B;AACAhB,GAAG,CAACiB,IAAJ,CAAS,aAAT,EAAwBC,YAAxB;AACAlB,GAAG,CAACiB,IAAJ,CAAS,aAAT,EAAwBE,YAAxB;AAEAnB,GAAG,CAACoB,GAAJ,CAAQ,IAAR,EAAc,UAASC,GAAT,EAAcC,GAAd,EAAmB;AAC/BA,EAAAA,GAAG,CAACC,QAAJ,CAAaC,cAAKC,IAAL,CAAUC,SAAV,EAAqB,cAArB,CAAb,EAAmD,UAASC,GAAT,EAAc;AAC/D,QAAIA,GAAJ,EAAS;AACPL,MAAAA,GAAG,CAACM,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqBF,GAArB;AACD;AACF,GAJD;AAKD,CAND;;AAQO,IAAMG,KAAK;AAAA;AAAA;AAAA;AAAA;AAAA,0BAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAEX,kBAFW;;AAAA;AAGjB9B,YAAAA,GAAG,CAAC+B,MAAJ,CAAWC,gBAAOC,IAAlB,EAAwBC,YAAY,CAACC,OAAO,CAACC,GAAT,EAAcJ,gBAAOC,IAArB,CAApC;AAHiB;AAAA;;AAAA;AAAA;AAAA;AAKjBE,YAAAA,OAAO,CAACE,KAAR;;AALiB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAH;;AAAA,kBAALP,KAAK;AAAA;AAAA;AAAA,GAAX;;;;AASA,IAAMI,YAAY,GAAG,SAAfA,YAAe,CAACE,GAAD,EAAMH,IAAN;AAAA,SAC1BG,GAAG,yCAAkCJ,gBAAOC,IAAzC,EADuB;AAAA,CAArB;;;AAGPH,KAAK","sourcesContent":["import express from 'express';\r\nimport bodyParser from 'body-parser';\r\nimport morgan from 'morgan';\r\nimport cors from 'cors';\r\nimport path from 'path';\r\nimport \"@babel/polyfill\";\r\n\r\nimport { connect } from './utils/db';\r\nimport config from './config';\r\n\r\nimport clubRouter from './api/club/club.router';\r\nimport familyRouter from './api/family/family.router';\r\nimport pinRouter from './api/pin/pin.router';\r\nimport studentRouter from './api/student/student.router';\r\nimport timesheetRouter from './api/timesheet/timesheet.router';\r\nimport timestampRouter from './api/timestamp/timestamp.router';\r\n\r\nimport userRouter from './api/user/user.router';\r\nimport { signup, signin, protect } from './utils/auth';\r\n\r\nexport const app = express();\r\n\r\napp.use(cors());\r\napp.use(bodyParser.json());\r\napp.use(bodyParser.urlencoded({ extended: true }));\r\napp.use(morgan('dev'));\r\napp.set('json spaces', 2);\r\n\r\n// if (process.env.NODE_ENV === 'production') {\r\n  app.use(express.static('build'));\r\n\r\n// }\r\n\r\napp.use('/api/club', protect, clubRouter);\r\napp.use('/api/family', protect, familyRouter);\r\napp.use('/api/pin', protect, pinRouter);\r\napp.use('/api/student', studentRouter);\r\napp.use('/api/timesheet', protect, timesheetRouter);\r\napp.use('/api/timestamp', protect, timestampRouter);\r\napp.use('/api/user', protect, userRouter);\r\napp.post('/api/signup', signup);\r\napp.post('/api/signin', signin);\r\n\r\napp.get('/*', function(req, res) {\r\n  res.sendFile(path.join(__dirname, './index.html'), function(err) {\r\n    if (err) {\r\n      res.status(500).send(err);\r\n    }\r\n  });\r\n});\r\n\r\nexport const start = async () => {\r\n  try {\r\n    await connect();\r\n    app.listen(config.port, handleListen(console.log, config.port));\r\n  } catch (e) {\r\n    console.error(e);\r\n  }\r\n};\r\n\r\nexport const handleListen = (log, port) =>\r\n  log(`Listening on http://localhost:${config.port}`);\r\n\r\nstart();\r\n"],"file":"index.js"}