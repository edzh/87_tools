(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{103:function(e,t,n){},113:function(e,t,n){e.exports={search:"NameFilter_search__RV1YH",btn:"NameFilter_btn__2O4nd"}},21:function(e,t,n){e.exports={btn:"DayFilter_btn__2KGlK"}},218:function(e,t,n){e.exports={container:"ManualEntry_container__2Ts8s",name:"ManualEntry_name__15gzw",btn:"ManualEntry_btn__F2Ber"}},219:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(33),i=n.n(c),o=(n(103),n(88)),u=n(89),s=n(93),l=n(90),m=n(95),d=n(222),f=n(94),b=n(220),h=n(6);var p=Object(h.b)(function(e){return{isAuthenticated:e.user.isAuthenticated}})(function(e){return e.isAuthenticated?e.children:r.a.createElement(b.a,{to:"/signin"})}),E=(n(28),""),g="SIGNIN_REQUEST",v="SIGNIN_SUCCESS",y="SIGNIN_FAILURE",N="SIGNUP_REQUEST",S="SIGNUP_SUCCESS",j="SIGNUP_FAILURE",O="SIGNOUT_REQUEST";function x(e){return{type:v,data:e}}function w(e){return{type:y,error:e}}function k(e,t){return function(n){return n({type:g}),fetch("".concat(E,"/api/signin"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("id_token"))},body:JSON.stringify({email:e,password:t})}).then(function(e){return e.json()}).then(function(e){n(I(x,w,e.token)),localStorage.setItem("id_token",e.token)}).catch(function(e){return n(w(e))})}}function _(e){return{type:S,data:e}}function T(e){return{type:j,error:e}}function F(e,t){return function(n){return n({type:N}),fetch("".concat(E,"/api/signup"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("id_token"))},body:JSON.stringify({email:e,password:t})}).then(function(e){return e.json()}).then(function(e){n(I(_,T,e.token)),localStorage.setItem("id_token",e.token)}).catch(function(e){return n(T(e))})}}function C(){return function(e){localStorage.removeItem("id_token"),e({type:O})}}function I(e,t,n){return function(a){fetch("".concat(E,"/api/user"),{headers:{Authorization:"Bearer ".concat(n)}}).then(function(e){return e.json()}).then(function(t){return a(e(t.data))}).catch(function(e){return a(t(e))})}}var A=n(221);var D=Object(h.b)(function(e){return{isAuthenticated:e.user.isAuthenticated}},function(e){return{signOut:function(){e(C())}}})(function(e){return r.a.createElement("button",{className:"py-2 no-underline text-blue hover:text-blue-lighter text-sm",onClick:function(){e.signOut()}},"Sign Out")}),U=function(e){var t=e.isAuthenticated,n=e.isFetching,a=e.user;return t?r.a.createElement("div",{className:"bg-grey-light mb-4 px-4 py-2"},r.a.createElement("p",{className:"py-2 text-sm"},"Hi ",!n&&a.email),r.a.createElement(D,{key:"1"})):r.a.createElement("div",{className:"bg-grey-light mb-4 px-4 py-2"},r.a.createElement(A.a,{className:"py-2 no-underline text-blue hover:text-blue-light text-sm block",to:"/signin"},"Sign In"),r.a.createElement(A.a,{className:"py-2 no-underline text-blue hover:text-blue-light text-sm block",to:"/signup"},"Sign Up"))};var P=Object(h.b)(function(e){return{isAuthenticated:e.user.isAuthenticated,user:e.user.data,isFetching:e.user.isFetching}},function(e){return{fetchUserInfo:function(t){e(I(x,w,t))}}})(function(e){var t=e.fetchUserInfo,n=e.isAuthenticated,c=e.isFetching,i=e.user;return Object(a.useEffect)(function(){t(localStorage.getItem("id_token"))},[]),r.a.createElement("nav",{className:"border fixed border-r shadow-inner bg-grey-lighter h-full lg:w-64 w-16"},r.a.createElement("h1",{className:"p-2 text-red text-5xl text-center font-bold"},"87"),r.a.createElement(U,{isAuthenticated:n,isFetching:c,user:i}),r.a.createElement(A.a,{activeClassName:"border-r-4 border-blue",className:"py-2 px-4 no-underline text-black block hover:bg-grey-light",to:"/addstudent"},"Add Student"),r.a.createElement(A.a,{activeClassName:"border-r-4 border-blue",className:"py-2 px-4 no-underline text-black block hover:bg-grey-light",to:"/timesheet"},"Timesheets"),r.a.createElement(A.a,{activeClassName:"border-r-4 border-blue",className:"py-2 px-4 no-underline text-black block hover:bg-grey-light",to:"/family"},"Family"),r.a.createElement(A.a,{activeClassName:"border-r-4 border-blue",className:"py-2 px-4 no-underline text-black block hover:bg-grey-light",to:"/club"},"Club"))}),z=n(2),B=n(51),M=n.n(B),L="ADD_STUDENT_TO_LIBRARY",R="REMOVE_STUDENT_FROM_LIBRARY",G="ADD_STUDENT_TO_GYM",H="REMOVE_STUDENT_FROM_GYM";var J=n(50),Y=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];function K(e){return r.a.createElement("div",null,e.clubs.sort(function(e,t){return e.day-t.day}).filter(function(t){return"all"===e.day||"".concat(t.day)===e.day}).map(function(e,t){return r.a.createElement("div",{key:e._id},Y[e.day],": ",e.name)}))}var W=n(22),Q=n.n(W),V=["K","1st","2nd","3rd","4th","5th"];var q=Object(h.b)(function(e){return{}},function(e){return{addStudentToLibrary:function(t){e(function(e){return{type:L,student:e}}(t))},addStudentToGym:function(t){e(function(e){return{type:G,student:e}}(t))}}})(function(e){return r.a.createElement("tr",{className:Q.a.row},r.a.createElement("td",{className:Q.a.name},r.a.createElement(J.a,{to:"/student/".concat(e.student._id)},e.student.name)),r.a.createElement("td",{className:Q.a.pin},e.student.pin),r.a.createElement("td",{className:Q.a.grade},V[e.student.grade]),r.a.createElement("td",{className:Q.a.clubs},r.a.createElement(K,{clubs:e.student.clubs,day:e.day})))});n(21);n(113);function Z(e){return r.a.createElement("input",{className:"mt-4 p-2 border rounded shadow-inner w-full",placeholder:"search...",value:e.query,onChange:e.onChange,type:"text"})}"abcdefghijklmnopqrstuvwxyz".split("");function X(e){var t=Object(a.useState)(""),n=Object(z.a)(t,2),c=n[0],i=n[1],o=Object(a.useState)(),u=Object(z.a)(o,2),s=u[0],l=u[1],m=Object(a.useState)(""),d=Object(z.a)(m,2),f=d[0],b=d[1],h=Object(a.useState)("all"),p=Object(z.a)(h,2),E=p[0],g=(p[1],/[\xb0"\xa7%()\[\]{}=\\?\xb4`'#<>|,;.:+_-]+/g);return e.isFetching&&null===e.students?r.a.createElement("p",null,"Loading..."):r.a.createElement("div",{className:M.a.container},r.a.createElement(Z,{filterName:function(e){e.preventDefault(),b(c),l(new RegExp(c.replace(g,""),"gi"))},currentQuery:f,query:c,onChange:function(e){i(e.target.value)}}),r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",{className:M.a.tableHeader},r.a.createElement("th",null,"Name"),r.a.createElement("th",null,"PIN"),r.a.createElement("th",null,"Grade"),r.a.createElement("th",null,"Clubs"))),r.a.createElement("tbody",null,e.students.filter(function(e){var t;return"all"===E||(e.clubs.forEach(function(e){"".concat(e.day)===E&&(t=!0)}),t)}).filter(function(e){return e.name.match(s)}).sort(function(e,t){var n=e.name.toUpperCase(),a=t.name.toUpperCase();return n<a?-1:n>a?1:0}).map(function(e,t){return r.a.createElement(q,{key:t,student:e,day:E})}))))}var $="FETCH_STUDENTS_REQUEST",ee="FETCH_STUDENTS_SUCCESS",te="FETCH_STUDENTS_FAILURE",ne="SET_STUDENT";function ae(){return function(e){return e({type:$}),fetch("".concat(E,"/api/student"),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("id_token"))}}).then(function(e){return e.json()}).then(function(t){var n;e((n=t.data,{type:ee,students:n}))}).catch(function(t){e({type:te})})}}var re=Object(h.b)(function(e){return{isFetching:e.student.isFetching,students:e.student.students}},function(e){return{fetchStudents:function(){e(ae())}}})(function(e){return Object(a.useEffect)(function(){e.fetchStudents()},[]),r.a.createElement("div",null,r.a.createElement("h2",null,"Pin Lookup"),r.a.createElement(X,{students:e.students,isFetching:e.isFetching}))});function ce(){var e=ie(""),t=ie(""),n=ie(""),c=Object(a.useState)(null),i=Object(z.a)(c,2),o=i[0],u=i[1];return r.a.createElement("form",{className:"w-1/3 shadow-md border rounded p-4",onSubmit:function(a){a.preventDefault(),fetch("".concat(E,"/api/student"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("id_token"))},body:JSON.stringify({name:e.value,grade:t.value,pin:n.value})}).then(function(e){if(!e.ok)throw Error("Unable to create student!");return e.json()}).then(function(){return u({status:"Success",message:"".concat(e.value," has been created!")})}).catch(function(e){return u({status:"Error",message:e.message})})}},r.a.createElement("h2",{className:"mb-4"},"New Student"),r.a.createElement("div",{className:"mb-4"},r.a.createElement("label",{className:"font-bold text-sm block"},"Name"),r.a.createElement("input",Object.assign({className:"border rounded p-1 w-full shadow block",type:"text"},e))),r.a.createElement("div",{className:"mb-4"},r.a.createElement("label",{className:"font-bold text-sm block"},"Grade"),r.a.createElement("select",Object.assign({className:"border rounded p-1 w-full shadow block"},t),r.a.createElement("option",{value:""},"---"),r.a.createElement("option",{value:"0"},"Kindergarten"),r.a.createElement("option",{value:"1"},"1st"),r.a.createElement("option",{value:"2"},"2nd"),r.a.createElement("option",{value:"3"},"3rd"),r.a.createElement("option",{value:"4"},"4th"),r.a.createElement("option",{value:"5"},"5th"))),r.a.createElement("div",{className:"mb-4"},r.a.createElement("label",{className:"font-bold text-sm block"},"PIN"),r.a.createElement("input",Object.assign({className:"border rounded p-1 w-full shadow block",type:"number"},n))),r.a.createElement("button",{className:"border shadow rounded p-1 bg-blue text-white text-lg hover:bg-grey-lighter hover:text-blue w-full",type:"submit"},"Submit"),o&&r.a.createElement("p",{className:"".concat("Error"===o.status?"border-red-light bg-red-lighter text-red-darker":"border-green-light bg-green-lighter text-green-darker"," p-2 mt-2 border-l-4 rounded")},o.message))}function ie(e){var t=Object(a.useState)(e),n=Object(z.a)(t,2),r=n[0],c=n[1];return{value:r,setValue:c,onChange:function(e){c(e.target.value)}}}var oe=n(97),ue=n(11);function se(){var e=le(""),t=Object(a.useState)(!1),n=Object(z.a)(t,2),c=n[0],i=n[1],o=le(Object(ue.format)(new Date,"YYYY-MM-DD"));return!0===c?r.a.createElement(oe.a,{to:"/timesheet"}):r.a.createElement("form",{className:"w-1/3 border rounded m-2 p-2",onSubmit:function(t){t.preventDefault(),fetch("".concat(E,"/api/timesheet"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("id_token"))},body:JSON.stringify({io:e.value,date:"".concat(o.value,"T04:00:00.000Z")})}).then(function(){i(!0)})}},r.a.createElement("h2",{className:"mb-4"},"New Timesheet"),r.a.createElement("div",{className:"flex mb-2"},r.a.createElement("div",{className:"w-1/5"},r.a.createElement("label",{className:"block pr-4 text-right"},"Date:")),r.a.createElement("div",{className:"w-3/4"},r.a.createElement("input",Object.assign({className:"p-1 border rounded",type:"date"},o)))),r.a.createElement("div",{className:"flex mb-2"},r.a.createElement("div",{className:"w-1/5"},r.a.createElement("label",{className:"block pr-4 text-right"},"Type:")),r.a.createElement("div",{className:"w-3/4"},r.a.createElement("select",Object.assign({className:"p-1 border rounded"},e),r.a.createElement("option",{value:""},"---"),r.a.createElement("option",{value:"in"},"Sign in"),r.a.createElement("option",{value:"out"},"Sign out")))),r.a.createElement("div",{className:"flex mb-2"},r.a.createElement("div",{className:"w-1/5"}),r.a.createElement("div",{className:"w-3/4"},r.a.createElement("button",{className:"p-2 border rounded hover:bg-blue-light hover:text-white",type:"submit"},"Create"))))}function le(e){var t=Object(a.useState)(e),n=Object(z.a)(t,2),r=n[0],c=n[1];return{value:r,onChange:function(e){c(e.target.value)}}}var me="FETCH_TIMESHEETS_REQUEST",de="FETCH_TIMESHEETS_SUCCESS",fe="FETCH_TIMESHEETS_FAILURE",be="SET_TIMESHEET";function he(){return function(e){return e({type:me}),fetch("".concat(E,"/api/timesheet"),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("id_token"))}}).then(function(e){return e.json()}).then(function(t){var n;e((n=t.data,{type:de,timesheets:n}))}).catch(function(t){e({type:fe})})}}var pe=function(e){var t=e.timesheet;return r.a.createElement(J.a,{to:"/timesheet/id/".concat(t._id)},r.a.createElement("button",{className:"p-2 mx-2 shadow border rounded hover:bg-grey-lighter"},"".concat("in"===t.io?"Sign in":"Sign out")))},Ee=function(e){var t=e.timesheetsDate,n=Object(a.useState)(!!t.timesheets.find(function(e){return"in"===e.io})),c=Object(z.a)(n,2),i=c[0],o=(c[1],Object(a.useState)(!!t.timesheets.find(function(e){return"out"===e.io}))),u=Object(z.a)(o,2),s=u[0];u[1];return r.a.createElement("tr",{className:"py-2 px-4 group bg-transparent border-b border-grey-light flex block"},r.a.createElement("td",{className:"my-auto w-1/4 block"},Object(ue.format)(t.date,"MMMM DD")),r.a.createElement("td",{className:"my-auto w-1/4 block"},t.timesheets.map(function(e){return r.a.createElement(pe,{key:e._id,timesheet:e})})),r.a.createElement("td",{className:"my-auto w-1/4 block text-left"},i&&t.timesheets.find(function(e){return"in"===e.io}).amount),r.a.createElement("td",{className:"my-auto w-1/4 block text-left"},s&&t.timesheets.find(function(e){return"out"===e.io}).amount))};function ge(e){if(e.isFetching&&null===e.timesheets)return r.a.createElement("p",null,"Loading...");var t=e.timesheets.reduce(function(e,t){return e[t.date]=e[t.date]||[],e[t.date].push({_id:t._id,io:t.io,amount:t.timestamp.length}),e},{}),n=Object.keys(t).map(function(e){return{date:e,timesheets:t[e]}}).sort(function(e,t){return e.date<t.date?1:e.date>t.date?-1:0});return r.a.createElement("div",{className:"border rounded shadow-md"},r.a.createElement("h2",{className:"p-4 border-b font-normal bg-grey-darkest text-white shadow"},"Timesheets"),r.a.createElement("table",{className:"overflow-auto block",style:{WebkitOverflowScrolling:"touch"}},r.a.createElement("thead",{className:"w-full block"},r.a.createElement("tr",{className:"px-4 py-2 border-b w-full block border-grey-light flex"},r.a.createElement("th",{className:"text-left block w-1/4"},"Date"),r.a.createElement("th",{className:"text-left block w-1/4"},"Type"),r.a.createElement("th",{className:"text-left block w-1/4"},"# of Students In"),r.a.createElement("th",{className:"text-left block w-1/4"},"# of Students Out"))),r.a.createElement("tbody",{className:"block",style:{height:"480px"}},n.map(function(e,t){return r.a.createElement(Ee,{key:e.date,timesheetsDate:e})}))))}var ve=Object(h.b)(function(e){return{isFetching:e.timesheets.isFetching,timesheets:e.timesheets.fetchedTimesheets}},function(e){return{fetchTimesheets:function(){e(he())}}})(function(e){return Object(a.useEffect)(function(){e.fetchTimesheets()},[]),r.a.createElement("div",null,r.a.createElement(ge,{timesheets:e.timesheets,isFetching:e.isFetching}),r.a.createElement(J.a,{to:"/timesheet/new"},r.a.createElement("button",{className:"p-2 my-2 w-full text-xl shadow bg-blue text-white hover:bg-grey-lightest hover:text-blue text-center no-underline border rounded"},"Create Timesheet")))}),ye=n(3),Ne=n.n(ye),Se=n(8);function je(e){var t=Object(a.useState)(e),n=Object(z.a)(t,2),r=n[0],c=n[1];return{value:r,onChange:function(e){c(e.target.value)}}}function Oe(e,t){var n=Object(a.useState)(e),r=Object(z.a)(n,2),c=r[0],i=r[1];return Object(a.useEffect)(function(){var n=setTimeout(function(){i(e)},t);return function(){clearTimeout(n)}},[e]),c}n(218);function xe(e){var t=Object(a.useState)(""),n=Object(z.a)(t,2),c=n[0],i=n[1],o=Oe(c,250),u=Object(a.useState)(!1),s=Object(z.a)(u,2),l=(s[0],s[1]),m=Object(a.useState)([]),d=Object(z.a)(m,2),f=d[0],b=d[1];Object(a.useEffect)(function(){if(o){var t=function(e,t){return t.filter(function(t){return t.name.toLowerCase().indexOf(e.toLowerCase())>-1})}(o,e.students);b(t),l(!0)}else b([])},[o]),Object(a.useEffect)(function(){e.fetchStudents()},[]);var h=function(t,n){e.postTimestamp(t,n).catch(function(t){return e.setMessage(t)})};return r.a.createElement("div",{className:"border rounded shadow-md mt-4"},r.a.createElement("div",{className:"border-b p-4"},r.a.createElement("h2",{className:"font-normal"},"Manual Entry"),r.a.createElement(Z,{query:c,onChange:function(e){i(e.target.value)}})),r.a.createElement("div",{className:"overflow-auto w-full shadow-inner block"},r.a.createElement("div",{className:"block h-32"},0!==f.length?f.map(function(e,t){return r.a.createElement("div",{key:e._id,className:"p-2 border-b block w-full flex"},r.a.createElement("p",{className:"pl-2 py-1 w-3/4"},e.name),r.a.createElement("p",{className:"flex"},r.a.createElement("button",{className:"border hover:text-white hover:bg-blue text-xs p-1 mr-1 rounded",onClick:function(){return h(e,"Lost")}},"Lost"),r.a.createElement("button",{className:"border hover:text-white hover:bg-blue text-xs p-1 mr-1 rounded",onClick:function(){return h(e,"Damaged")}},"Damaged")))}):r.a.createElement("div",{className:"bg-grey-lightest h-full"},r.a.createElement("p",{className:"text-center text-grey pt-8"},"Type to search")))))}var we="border-red-light bg-red-lighter text-red-darker",ke="border-green-light bg-green-lighter text-green-darker",_e="border-yellow-light bg-yellow-lighter text-yellow-darker";function Te(e){var t=e.message;return t?r.a.createElement("p",{className:"p-2 mt-2 border-l-4 ".concat("Error"===t.status?we:"Success"===t.status?ke:"Warning"===t.status&&_e," rounded")},t.message):null}var Fe=n(14);function Ce(e){var t=e.family,n=Object(a.useState)([]),c=Object(z.a)(n,2),i=c[0],o=c[1];return Object(a.useEffect)(function(){o(t.reduce(function(e,t){return e.push({_id:t._id,name:t.name,selected:!1}),e},[]))},[t]),0===i.length?null:r.a.createElement("div",null,i.map(function(e,t){return r.a.createElement("button",{className:"p-2 my-2 w-full shadow block border rounded hover:border-blue ".concat(e.selected?"bg-blue text-white":"bg-transparent"),key:e._id,onClick:function(){return function(e){var t=Object(Fe.a)(i);t[e].selected=!t[e].selected,o(t)}(t)}},e.name)}),r.a.createElement("button",{className:"p-2 my-2 w-full shadow block border rounded bg-grey-lightest hover:bg-blue hover:text-white",onClick:function(){return e.handleFamily(i.filter(function(e){return!0===e.selected}))}},"Select"))}function Ie(e){var t=e.message,n=e.family,a=e.handleFamily,c=e.handleSubmit,i=e.pin,o=e.setPin;return r.a.createElement("div",{className:"p-4 border rounded shadow-md"},r.a.createElement("h2",{className:"mb-4 font-normal"},"Timeclock"),r.a.createElement("form",{onSubmit:c},r.a.createElement("input",{className:"border shadow-inner block p-4 text-xl rounded-t w-full",placeholder:"PIN",type:"number",autoFocus:!0,value:i,onChange:function(e){o(e.target.value)}}),r.a.createElement("button",{className:"p-2 border hover:border-blue hover:bg-blue hover:text-white shadow text-blue bg-grey-lightest border-grey-light text-xl rounded-b w-full",type:"submit"},"Submit")),r.a.createElement(Te,{message:t}),r.a.createElement(Ce,{family:n,handleFamily:a}))}var Ae=function(){return r.a.createElement("div",{className:"border-b flex border-grey-light px-4"},r.a.createElement("p",{className:"py-1 font-bold w-1/3"},"Name"),r.a.createElement("p",{className:"py-1 font-bold w-1/3"},"Club"),r.a.createElement("p",{className:"py-1 font-bold w-24"},"Time"),r.a.createElement("p",{className:"py-1 font-bold w-32"},"Option"))},De=function(e){var t=e.timestamp,n=e.removeTimestamp,a=e.timesheet;return r.a.createElement("div",{className:"text-sm flex py-1 px-4 bg-transparent border-b border-grey-light"},r.a.createElement("p",{className:"w-1/3"},r.a.createElement(J.a,{className:"no-underline text-blue hover:text-blue-light",to:"/student/".concat(t.student._id)},t.student.name)),r.a.createElement("p",{className:" w-1/3"},t.student.clubs.map(function(e){return e.day===parseInt(Object(ue.format)(new Date(a.date),"E"))?e.name:null})),r.a.createElement("p",{className:" w-24"},Object(ue.format)(new Date(t.datetime),"hh:mm a")),r.a.createElement("p",{className:" w-32 flex"},r.a.createElement("button",{className:"border text-xs hover:bg-red hover:text-white p-1 mr-1 -my-1 rounded",onClick:function(){return n(t._id)}},"Remove"),r.a.createElement("p",{className:"mx-1"},t.fobStatus)))};function Ue(e){var t=e.timesheet,n=e.setRefresh,c=je(""),i=Oe(c.value,250),o=Object(a.useState)(!1),u=Object(z.a)(o,2),s=u[0],l=u[1],m=Object(a.useState)(!1),d=Object(z.a)(m,2),f=d[0],b=d[1],h=Object(a.useState)([]),p=Object(z.a)(h,2),g=p[0],v=p[1];Object(a.useEffect)(function(){if(i){var e=(n=i,t.timestamp.filter(function(e){return e.student.name.toLowerCase().indexOf(n.toLowerCase())>-1}));v(e),l(!0)}else v([]),l(!1);var n},[i]);var y=function(){var e=Object(Se.a)(Ne.a.mark(function e(t){var a;return Ne.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(E,"/api/timestamp/").concat(t),{method:"DELETE",headers:{Authorization:"Bearer ".concat(localStorage.getItem("id_token"))}}).then(function(){n(!0)});case 3:return a=e.sent,e.abrupt("return",a);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",Promise.reject());case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return function(t){return e.apply(this,arguments)}}();return t.timestamp?r.a.createElement("div",{className:"mb-3 border shadow-md rounded mt-4 lg:mt-0"},r.a.createElement("div",{className:"flex p-4 bg-grey-darkest shadow"},r.a.createElement("h2",{className:"font-normal text-white"},"in"===t.io?"Sign In":"Sign Out"," -"," ",Object(ue.format)(t.date,"dddd, MMMM D")),r.a.createElement("div",{className:"ml-auto"},r.a.createElement("button",{className:"bg-white text-xs rounded mr-2 p-1",onClick:function(){return n(!0)}},"Refresh"),r.a.createElement("button",{className:"".concat(f&&"bg-blue text-white"," bg-white text-xs rounded p-1"),onClick:function(){return b(!f)}},"Search"))),r.a.createElement("div",{className:"overflow-auto w-full block",style:{WebkitOverflowScrolling:"touch",height:"530px"}},f&&r.a.createElement("input",Object.assign({className:"p-2 shadow-inner rounded border m-4 mb-2",placeholder:"Search Name",type:"text"},c)),r.a.createElement(Ae,null),s?g.map(function(e){return r.a.createElement(De,{removeTimestamp:y,timesheet:t,key:e._id,timestamp:e})}):t.timestamp.map(function(e){return r.a.createElement(De,{removeTimestamp:y,timesheet:t,key:e._id,timestamp:e})}))):r.a.createElement("p",null,"loading...")}var Pe=n(47),ze=n.n(Pe),Be={top:.5,left:.5,bottom:.5,right:.5,width:7.5},Me=.5+Be.top,Le=.075,Re=[.5,1,1.5,2,2.5,3,3.5,4,4.5,5,5.5,6,6.5,7,7.5,8],Ge=.33,He=Math.floor(10.5/Ge-Me/Ge);function Je(e,t){e.setFontSize(14),e.setTextColor(.5),e.setLineWidth(.005),e.text("".concat("in"===t.io?"Signed in":"Signed out"," sheet for ").concat(Object(ue.format)(t.date,"MMMM DD, YYYY")),Be.left,Be.top),e.text("87 Afterschool",Be.width+Be.right,Be.top,{align:"right"})}function Ye(e,t){var n=e.name.toUpperCase(),a=t.name.toUpperCase();return n<a?-1:n>a?1:0}function Ke(e,t){e.line(Be.left,Ge*t+Le+Me,Be.left+Be.width,Ge*t+Le+Me)}var We=function(e){var t=Object(a.useState)([]),n=Object(z.a)(t,2),c=n[0],i=n[1],o=Object(a.useState)([]),u=Object(z.a)(o,2),s=u[0],l=u[1];parseInt(Object(ue.format)(c.date,"E")),Object(a.useEffect)(function(){var t=function(){var t=Object(Se.a)(Ne.a.mark(function t(){var n;return Ne.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(E,"/api/timesheet/").concat(e.timesheetId),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("id_token"))}}).then(function(e){return e.json()}).then(function(e){return e.data});case 2:n=t.sent,i(n);case 4:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),n=function(){var e=Object(Se.a)(Ne.a.mark(function e(){var t;return Ne.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(E,"/api/club"),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("id_token"))}}).then(function(e){return e.json()}).then(function(e){return e.data});case 2:t=e.sent,l(t);case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}();t(),n()},[]);var m=function(e){var t=new ze.a({orientation:"p",unit:"in",format:"letter"});"signin"===e&&function(e,t){var n=parseInt(Object(ue.format)(t.date,"E"));t.timestamp.sort(function(e,t){return Ye(e.student,t.student)}).forEach(function(a,r){var c=a.datetime,i=a.student,o=i.clubs,u=i.name,s=o.find(function(e){return e.day===n}),l=s?s.name:"Drop In",m=r%He;0===m&&(0!==r&&e.addPage(),Je(e,t),e.setFontSize(12),e.setFontStyle("bold"),e.text("Name",Re[0],Ge*m+Me),e.text("Club",Re[5],Ge*m+Me),e.text("Time",Re[14],Ge*m+Me,{align:"left"}),e.setFontSize(10),e.setFontStyle("normal")),e.text(u,Re[0],Ge*(m+1)+Me),e.text(l,Re[5],Ge*(m+1)+Me),e.text(Object(ue.format)(c,"h:mm a"),Re[15],Ge*(m+1)+Me,{align:"right"}),Ke(e,m)})}(t,c),"class"===e&&function(e,t,n){var a=parseInt(Object(ue.format)(t.date,"E"));n.reduce(function(e,n){var a=n.students.reduce(function(e,n){var a=t.timestamp.find(function(e){return e.student._id===n._id});return e.push({_id:n._id,name:n.name,grade:n.grade,signedIn:!!a}),e},[]);return e.push({_id:n._id,name:n.name,day:n.day,students:a}),e},[]).filter(function(e){return e.day===a}).forEach(function(n,a){var r=1;Je(e,t),e.setFontSize(12),e.text(n.name,Re[0],Me),e.setFontSize(10),n.students.sort(function(e,t){return Ye(e,t)}).forEach(function(a,c){c%(He-1)===0&&(0!==c&&(e.addPage(),r=1,e.setFontSize(12),e.text(n.name,Re[0],Me)),Je(e,t),e.setFontSize(12),e.setFontStyle("bold"),e.text("Name",Re[0],Ge*r+Me),e.text("Grade",Re[5],Ge*r+Me),e.text("Status",Re[15],Ge*r+Me,{align:"right"}),e.setFontSize(10),e.setFontStyle("normal")),e.text(a.name,Re[0],Ge*(r+1)+Me),e.text("".concat(0===a.grade?"K":a.grade),Re[5],Ge*(r+1)+Me,{align:"left"}),e.text("".concat(a.signedIn?"Present":""),Re[15],Ge*(r+1)+Me,{align:"right"}),Ke(e,r),r++}),e.addPage()})}(t,c,s),t.output("dataurlnewwindow","log.pdf")};return r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{className:"p-2 mr-2 shadow border rounded hover:bg-grey-lighter",onClick:function(){return m("signin")}},"Print Sign In"),r.a.createElement("button",{className:"p-2 mx-2 shadow border rounded hover:bg-grey-lighter",onClick:function(){return m("class")}},"Print Class"))};var Qe=Object(h.b)(function(e,t){return{timesheet:t.timesheet,students:e.student.students}},function(e){return{setTimesheet:function(t){e(function(e){return{type:be,timesheet:e}}(t))},fetchStudents:function(){e(ae())}}})(function(e){var t=Object(a.useState)(""),n=Object(z.a)(t,2),c=n[0],i=n[1],o=Object(a.useState)(""),u=Object(z.a)(o,2),s=u[0],l=u[1],m=Object(a.useState)(!1),d=Object(z.a)(m,2),f=d[0],b=d[1],h=Object(a.useState)([]),p=Object(z.a)(h,2),g=p[0],v=p[1],y=Object(a.useState)([]),N=Object(z.a)(y,2),S=N[0],j=N[1],O=Object(a.useState)(!1),x=Object(z.a)(O,2),w=x[0],k=x[1],_=function(){var e=Object(Se.a)(Ne.a.mark(function e(t){var n;return Ne.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(E,"/api/timesheet/").concat(t),{method:"DELETE",headers:{Authorization:"Bearer ".concat(localStorage.getItem("id_token"))}}).then(function(){k(!0)});case 3:return n=e.sent,e.abrupt("return",n);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",Promise.reject());case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return function(t){return e.apply(this,arguments)}}();Object(a.useEffect)(function(){e.setTimesheet(e.timesheet)},[]),Object(a.useEffect)(function(){fetch("".concat(E,"/api/timesheet/").concat(e.timesheet),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("id_token"))}}).then(function(e){return e.json()}).then(function(e){j(e.data)}).then(function(){return b(!1)})},[f]);var T=function(){var t=Object(Se.a)(Ne.a.mark(function t(n,a){return Ne.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(E,"/api/timestamp"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("id_token"))},body:JSON.stringify({student:n._id,timesheet:e.timesheet,fobStatus:a})}).then(function(e){if(!e.ok)throw Error("".concat(n.name," is already signed ").concat(S.io,"!"));return e.json()}).then(function(e){return e.data}).then(function(){return l({status:"Success",message:"".concat(n.name," has been signed ").concat(S.io,"!")})}).catch(function(e){return l({status:"Error",message:e.message})});case 2:t.sent,b(!0);case 4:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}(),F=function(){var e=Object(Se.a)(Ne.a.mark(function e(t){var n;return Ne.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(E,"/api/student?pin=").concat(t),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("id_token"))}}).then(function(e){if(!e.ok)throw Error("Student pin not found");return e.json()}).then(function(e){return e.data[0]}).catch(function(){return C(t)});case 2:return(n=e.sent)||(C(t)&&(n=C(t)),l({status:"Warning",message:"".concat(t," is a family pin!")})),e.abrupt("return",n);case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),C=function(){var e=Object(Se.a)(Ne.a.mark(function e(t){var n;return Ne.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(E,"/api/pin/").concat(t),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("id_token"))}}).then(function(e){if(!e.ok)throw Error("Student not found!");return e.json()}).then(function(e){return e.data}).catch(function(e){return l({status:"Error",message:e.message})});case 2:if(!(n=e.sent)){e.next=7;break}if(1!==n.students.length){e.next=6;break}return e.abrupt("return",n.students[0]);case 6:v(n.students);case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}();return!0===w?r.a.createElement(oe.a,{to:"/timesheet"}):r.a.createElement("div",{className:"lg:flex"},r.a.createElement("div",{className:"lg:w-1/3 lg:1/3"},r.a.createElement(Ie,{pin:c,setPin:i,handleSubmit:function(e){e.preventDefault(),F(c).then(function(e){return T(e)}).catch(function(e){return console.error(e)}).finally(function(){return i("")})},message:s,family:g,handleFamily:function(e){e.forEach(function(e){T(e).catch(function(e){return l(e)})}),v([])}}),r.a.createElement(xe,{students:e.students,fetchStudents:e.fetchStudents,postTimestamp:T,setMessage:l})),r.a.createElement("div",{className:"lg:pl-4 lg:w-2/3"},r.a.createElement(Ue,{refresh:f,setRefresh:b,timesheet:S}),r.a.createElement("div",{className:"flex"},r.a.createElement("button",{className:"p-2 ml-4 border rounded hover:bg-red hover:text-white hidden",onClick:function(){return _(e.timesheet)}},"Delete"),r.a.createElement(We,{timesheetId:e.timesheet}))))}),Ve="FETCH_FAMILIES_REQUEST",qe="FETCH_FAMILIES_SUCCESS",Ze="FETCH_FAMILIES_FAILURE",Xe="SET_FAMILY";function $e(){return function(e){return console.log(localStorage.getItem("id_token")),e({type:Ve}),fetch("".concat(E,"/api/family"),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("id_token"))}}).then(function(e){return e.json()}).then(function(t){var n;e((n=t.data,{type:qe,families:n}))}).catch(function(t){e({type:Ze})})}}function et(e){return r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Family Name"))),r.a.createElement("tbody",null,e.families.map(function(e,t){return r.a.createElement("tr",{key:e._id},r.a.createElement("td",null,r.a.createElement(J.a,{to:"/family/".concat(e._id)},e.name)))})))}function tt(e){var t=ie("");return r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),fetch("".concat(E,"/api/family"),{method:"POST",headers:{Authorization:"Bearer ".concat(localStorage.getItem("id_token")),"Content-Type":"application/json"},body:JSON.stringify({name:t.value})})}},r.a.createElement("input",Object.assign({className:"p-2 border rounded",type:"text"},t)),r.a.createElement("button",{type:"submit"},"Create new family"))}var nt=Object(h.b)(function(e){return{isFetching:e.family.isFetching,families:e.family.families}},function(e){return{fetchFamilies:function(){e($e())}}})(function(e){return Object(a.useEffect)(function(){e.fetchFamilies()},[]),r.a.createElement("div",null,r.a.createElement(tt,null),r.a.createElement(et,{isFetching:e.isFetching,families:e.families}))}),at=function(e){var t=e.family,n=e.pickups,a=e.setPickups,c=e.setMessage,i=(e.editPickups,e.setEditPickups,ie("")),o=ie("");function u(){return(u=Object(Se.a)(Ne.a.mark(function e(r){var u,s;return Ne.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r.preventDefault(),e.next=3,fetch("".concat(E,"/api/pin/").concat(o.value),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("id_token"))}}).then(function(e){return e.json()}).then(function(e){return e.data}).catch(function(){return c({status:"Success",message:"Pin added."})});case 3:(u=e.sent)?c({status:"Error",message:"".concat(u.name," is using this pin.")}):(s=[].concat(Object(Fe.a)(n),[{name:i.value,pin:o.value}]),fetch("".concat(E,"/api/family/").concat(t._id),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("id_token"))},body:JSON.stringify({pickups:s})}).then(function(){return a(s)}).then(function(){o.setValue(""),i.setValue("")}));case 5:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}return r.a.createElement("div",{className:"m-4"},r.a.createElement("form",{className:"",onSubmit:function(e){return u.apply(this,arguments)}},r.a.createElement("input",Object.assign({className:"p-2 mr-1 -ml-1 w-64 text-sm border rounded",type:"text",placeholder:"Name of pickup adult..."},i)),r.a.createElement("input",Object.assign({className:"p-2 w-32 text-sm border rounded",type:"number",placeholder:"PIN"},o)),r.a.createElement("button",{className:"p-1 my-2 -ml-1 border rounded block bg-blue text-white hover:bg-white hover:text-black",type:"submit"},"Add Pin")))},rt=function(e){var t=e.family,n=e.editPickups,c=e.setEditPickups,i=Object(a.useState)(""),o=Object(z.a)(i,2),u=o[0],s=o[1],l=Object(a.useState)([]),m=Object(z.a)(l,2),d=m[0],f=m[1];return Object(a.useEffect)(function(){f(t.pickups)},[t]),r.a.createElement("div",{className:"border rounded shadow-md my-4"},r.a.createElement("div",{className:"flex border-b"},r.a.createElement("h3",{className:"m-4"},"Pickups"),r.a.createElement("button",{className:"".concat(n?"bg-blue text-white":"bg-white"," m-4 ml-auto text-xs border rounded shadow p-1"),onClick:function(){return c(!n)}},"Edit")),r.a.createElement("div",{className:"m-4"},r.a.createElement("div",{className:"flex"},r.a.createElement("p",{className:"font-bold w-64"},"Name"),r.a.createElement("p",{className:"font-bold w-32"},"Pin")),d&&d.map(function(e,a){return r.a.createElement("div",{className:"flex my-4",key:e.pin},r.a.createElement("p",{className:"w-64"},e.name),r.a.createElement("p",{className:"w-16"},e.pin),n?r.a.createElement("button",{className:"",type:"button",onClick:function(){return function(e){var n=d.filter(function(t){return t.pin!==e});fetch("".concat(E,"/api/family/").concat(t._id),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("id_token"))},body:JSON.stringify({pickups:n})}).then(function(){return f(n)}).then(function(){return s({status:"Warning",message:"".concat(e," has been removed!")})})}(e.pin)}},"Remove"):null)})),n&&r.a.createElement(at,{family:t,pickups:d,setPickups:f,editPickups:n,setEditPickups:c,setMessage:s}),r.a.createElement(Te,{message:u}))},ct=function(e){var t=e.setEditDetails,n=e.family,c=ie(n.name),i=(ie(""),ie(""),Object(a.useState)(n.pickups)),o=Object(z.a)(i,2);o[0],o[1];return r.a.createElement("form",{className:"m-4",onSubmit:function(e){e.preventDefault(),fetch("".concat(E,"/api/family/").concat(n._id),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("id_token"))},body:JSON.stringify({name:c.value})}).then(function(){return t(!1)})}},r.a.createElement("p",{className:"font-bold"},"Family Name"),r.a.createElement("input",Object.assign({className:"p-2 my-2 border rounded",type:"text"},c)),r.a.createElement("button",{className:"p-2 border rounded ml-2 bg-blue text-white hover:bg-white hover:text-black",type:"submit"},"Save Name"))},it=function(e){var t=e.family,n=e.editDetails,c=e.setEditDetails,i=Object(a.useState)(!1),o=Object(z.a)(i,2);o[0],o[1];console.log(t._id);return r.a.createElement("div",{className:"border rounded shadow-md"},r.a.createElement("div",{className:"flex border-b bg-grey-darkest w-full"},r.a.createElement("h2",{className:"m-4 font-normal text-white"},t.name),r.a.createElement("button",{className:"".concat(n?"bg-blue text-white":"bg-white"," m-4 ml-auto text-xs border rounded shadow p-1"),onClick:function(){return c(!n)}},"Edit")),n?r.a.createElement(ct,{family:t,editDetails:n,setEditDetails:c}):r.a.createElement("div",{className:"m-4"},r.a.createElement("h3",null,"Children"),r.a.createElement("div",{className:"flex mt-4"},r.a.createElement("p",{className:"text-left w-64"},"Name"),r.a.createElement("p",{className:"text-left"},"Grade")),t.students&&t.students.map(function(e){return e?r.a.createElement("div",{className:"flex my-4"},r.a.createElement(J.a,{className:"no-underline w-64",to:"/student/".concat(e._id)},r.a.createElement("p",{className:"text-blue hover:text-blue-light"},e.name)),r.a.createElement("p",null,e.grade)):r.a.createElement("p",null,"No student assigned!")})))};var ot=Object(h.b)(function(e,t){return{family:t.family}},function(e){return{setFamily:function(t){e(function(e){return{type:Xe,family:e}}(t))}}})(function(e){var t=Object(a.useState)(""),n=Object(z.a)(t,2),c=n[0],i=n[1],o=Object(a.useState)(!1),u=Object(z.a)(o,2),s=u[0],l=u[1],m=Object(a.useState)(!1),d=Object(z.a)(m,2),f=d[0],b=d[1];return Object(a.useEffect)(function(){e.setFamily(e.family),function(){var t=Object(Se.a)(Ne.a.mark(function t(){var n;return Ne.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(E,"/api/family/").concat(e.family),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("id_token"))}}).then(function(e){return e.json()}).then(function(e){return e.data});case 2:n=t.sent,i(n);case 4:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()()},[s]),r.a.createElement("div",null,r.a.createElement(it,{family:c,editDetails:s,setEditDetails:l}),r.a.createElement(rt,{family:c,editPickups:f,setEditPickups:b}))}),ut=n(96),st=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];function lt(e){var t=e.student,n=e.editClubs,c=e.setEditClubs,i=Object(a.useState)([]),o=Object(z.a)(i,2),u=o[0],s=o[1],l=Object(a.useState)([]),m=Object(z.a)(l,2),d=m[0],f=m[1],b=Object(a.useState)([]),h=Object(z.a)(b,2),p=h[0],g=h[1];return Object(a.useEffect)(function(){var e=t.clubs.reduce(function(e,t){return e[t.day-1]=t._id,e},["","","","",""]);g(e),f(e)},[]),Object(a.useEffect)(function(){(function(){var e=Object(Se.a)(Ne.a.mark(function e(){var t;return Ne.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(E,"/api/club"),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("id_token"))}}).then(function(e){return e.json()}).then(function(e){return e.data});case 2:t=e.sent,s(t);case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}})()()},[]),r.a.createElement("form",{className:"p-4",onSubmit:function(e){e.preventDefault(),function(){var e=d.filter(function(e){return!p.includes(e)}),a=p.filter(function(e){return!d.includes(e)});(function(e,t,n){t.forEach(function(){var t=Object(Se.a)(Ne.a.mark(function t(n){var a;return Ne.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(E,"/api/club/").concat(n),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("id_token"))}}).then(function(e){return e.json()}).then(function(e){return e.data.students});case 2:a=t.sent,fetch("".concat(E,"/api/club/").concat(n),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("id_token"))},body:JSON.stringify({students:a.map(function(e){return e._id}).filter(function(t){return t!==e})})});case 4:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()),n.forEach(function(){var t=Object(Se.a)(Ne.a.mark(function t(n){var a;return Ne.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(E,"/api/club/").concat(n),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("id_token"))}}).then(function(e){return e.json()}).then(function(e){return e.data.students});case 2:a=t.sent,fetch("".concat(E,"/api/club/").concat(n),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("id_token"))},body:JSON.stringify({students:a?a.map(function(e){return e._id}).concat(e):[e]})});case 4:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}())})(t._id,e,a),fetch("".concat(E,"/api/student/").concat(t._id),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("id_token"))},body:JSON.stringify({clubs:p.filter(function(e){return""!==e})})}).then(function(){return c(!n)})}()}},p.map(function(e,t){var n=t+1,a=u.filter(function(e){return e.day===n});return r.a.createElement("div",{className:"flex m-2"},r.a.createElement("h3",{className:"w-32"},st[n]),r.a.createElement("select",{className:"border rounded block",value:e,onChange:function(e){return function(e,t){var n=Object(Fe.a)(p);n[e]=t,g(n)}(t,e.target.value)}},r.a.createElement("option",{value:""},"---"),a.filter(function(e){return e.day===n}).map(function(e,t){return r.a.createElement("option",{key:e._id,value:e._id},e.name)})))}),r.a.createElement("button",{className:"p-2 border rounded",type:"submit"},"Save"))}var mt=function(e){var t=Object(a.useState)([]),n=Object(z.a)(t,2),c=n[0],i=n[1],o=je(e.family?e.family._id:"");return Object(a.useEffect)(function(){(function(){var e=Object(Se.a)(Ne.a.mark(function e(){var t;return Ne.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(E,"/api/family"),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("id_token"))}}).then(function(e){return e.json()}).then(function(e){return e.data});case 2:t=e.sent,i(t);case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}})()()},[]),r.a.createElement("form",{onSubmit:function(t){t.preventDefault(),fetch("".concat(E,"/api/student/").concat(e.student._id),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("id_token"))},body:JSON.stringify({family:o.value})}).then(function(){e.setEditFamily(!e.editFamily)})}},r.a.createElement("select",Object.assign({className:"p-2 mt-4 ml-4 text-sm border rounded"},o),r.a.createElement("option",{value:""},"---"),c.sort(function(e,t){var n=e.name.toUpperCase(),a=t.name.toUpperCase();return n<a?-1:n>a?1:0}).map(function(e){return r.a.createElement("option",{key:e._id,value:e._id},e.name)})),r.a.createElement("button",{className:"p-2 m-4 block border rounded",type:"submit"},"Save"))};function dt(e){var t=e.editDetails,n=e.setEditDetails,a=e.student,c=je(a.name),i=je(a.grade),o=je(a.pin);return r.a.createElement("form",{className:"m-4",onSubmit:function(e){e.preventDefault(),fetch("".concat(E,"/api/student/").concat(a._id),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("id_token"))},body:JSON.stringify({name:c.value,grade:i.value,pin:o.value})}).then(function(){n(!t)})}},r.a.createElement("label",{className:"w-32 font-bold mb-2 block"},"Name"),r.a.createElement("input",Object.assign({className:"p-1 border rounded",type:"text"},c)),r.a.createElement("label",{className:"text-sm w-32 font-bold mt-4 mb-2 block"},"Grade"),r.a.createElement("select",Object.assign({className:"p-1 border rounded"},i),r.a.createElement("option",{value:"0"},"Kindergarten"),r.a.createElement("option",{value:"1"},"1st Grade"),r.a.createElement("option",{value:"2"},"2nd Grade"),r.a.createElement("option",{value:"3"},"3rd Grade"),r.a.createElement("option",{value:"4"},"4th Grade"),r.a.createElement("option",{value:"5"},"5th Grade")),r.a.createElement("label",{className:"w-32 font-bold mt-4 mb-2 block"},"PIN"),r.a.createElement("input",Object.assign({className:"p-1 border rounded",type:"number"},o)),r.a.createElement("button",{className:"p-2 border rounded mt-4 mb-2 block",type:"submit"},"Save"))}var ft=["Kindergarten","1st Grade","2nd Grade","3rd Grade","4th Grade","5th Grade"];function bt(e){var t=e.editDetails,n=e.setEditDetails,a=e.student;return r.a.createElement("div",{className:"border rounded shadow-md"},r.a.createElement("div",{className:"flex border-b bg-grey-darkest w-full"},r.a.createElement("h2",{className:"m-4 font-normal text-white"},a.name),r.a.createElement("button",{className:"".concat(t?"bg-blue text-white":"bg-white"," m-4 ml-auto text-xs border rounded shadow p-1"),onClick:function(){return n(!t)}},"Edit")),t?r.a.createElement(dt,{student:a,editDetails:t,setEditDetails:n}):r.a.createElement("div",null,r.a.createElement("div",{className:"m-4 flex"},r.a.createElement("h3",{className:"w-32 text-xl"},"Grade"),r.a.createElement("p",{className:"text-xl"},ft[a.grade])),r.a.createElement("div",{className:"m-4 flex"},r.a.createElement("h3",{className:"w-32 text-xl"},"PIN"),r.a.createElement("p",{className:"text-xl"},a.pin))))}var ht=function(e){var t=e.student,n=e.family,a=e.editFamily,c=e.setEditFamily;return r.a.createElement("div",{className:"border rounded shadow-md my-4"},r.a.createElement("div",{className:"flex border-b"},r.a.createElement("h3",{className:"text-xl m-4"},"Family"),r.a.createElement("button",{className:"".concat(a?"bg-blue text-white":"bg-white"," m-4 ml-auto text-xs border rounded shadow p-1"),onClick:function(){return c(!a)}},"Edit")),a?r.a.createElement(mt,{student:t,family:n,editFamily:a,setEditFamily:c}):n&&r.a.createElement("div",{className:"m-4"},r.a.createElement(J.a,{to:"/family/".concat(n._id),className:"no-underline"},r.a.createElement("p",{className:"text-xl text-blue-dark hover:text-blue"},n.name)),r.a.createElement("h3",{className:"my-2"},"Pickups"),n.pickups.map(function(e,t){return r.a.createElement("div",{className:"flex",key:t},r.a.createElement("p",{className:"w-64 text-bold"},e.name),r.a.createElement("p",null,e.pin))})))},pt=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],Et=function(e){var t=e.student,n=e.editClubs,a=e.setEditClubs;return r.a.createElement("div",{className:"border rounded shadow-md"},r.a.createElement("div",{className:"flex border-b"},r.a.createElement("h3",{className:"m-4"},"Clubs"),r.a.createElement("button",{className:"".concat(n?"bg-blue text-white":"bg-white"," m-4 ml-auto text-xs border rounded shadow p-1"),onClick:function(){return a(!n)}},"Edit")),n?r.a.createElement(lt,{student:t,editClubs:n,setEditClubs:a}):r.a.createElement("div",{className:"p-4"},t.clubs.map(function(e,t){return r.a.createElement("div",{className:"flex m-2",key:t},r.a.createElement("p",{className:"w-32"},pt[e.day]),r.a.createElement(J.a,{className:"no-underline",to:"/club/".concat(e._id)},r.a.createElement("p",{className:"text-blue-dark hover:text-blue"},e.name)))})))};var gt=Object(h.b)(function(e,t){return{student:t.student,isAuthenticated:e.user.isAuthenticated}},function(e){return{setStudent:function(t){e(function(e){return{type:ne,student:e}}(t))}}})(function(e){e.isAuthenticated;var t=Object(ut.a)(e,["isAuthenticated"]),n=Object(a.useState)(null),c=Object(z.a)(n,2),i=c[0],o=c[1],u=Object(a.useState)(!1),s=Object(z.a)(u,2),l=s[0],m=s[1],d=Object(a.useState)(!1),f=Object(z.a)(d,2),b=f[0],h=f[1],p=Object(a.useState)(!1),g=Object(z.a)(p,2),v=g[0],y=g[1];return Object(a.useEffect)(function(){t.setStudent(t.student),fetch("".concat(E,"/api/student/").concat(t.student),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("id_token"))}}).then(function(e){return e.json()}).then(function(e){return o(e.data)})},[l,b,v]),i?r.a.createElement("div",null,r.a.createElement(bt,{student:i,editDetails:l,setEditDetails:m}),r.a.createElement(ht,{student:i,family:i.family,editFamily:b,setEditFamily:h}),r.a.createElement(Et,{student:i,editClubs:v,setEditClubs:y})):null}),vt="FETCH_CLUBS_REQUEST",yt="FETCH_CLUBS_SUCCESS",Nt="FETCH_CLUBS_FAILURE",St="SET_CLUB";function jt(){return function(e){return e({type:vt}),fetch("".concat(E,"/api/club"),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("id_token"))}}).then(function(e){return e.json()}).then(function(t){var n;e((n=t.data,{type:yt,clubs:n}))}).catch(function(t){e(function(e){return{type:Nt,err:e}}(t))})}}function Ot(e){return console.log(e.clubs),r.a.createElement("ul",null,e.clubs.map(function(e){return r.a.createElement("li",{key:e._id},r.a.createElement(J.a,{to:"/club/".concat(e._id)},e.name," ",Y[e.day]))}))}var xt=Object(h.b)(function(e){return{clubs:e.club.clubs}},function(e){return{fetchClubs:function(){e(jt())}}})(function(e){return Object(a.useEffect)(function(){e.fetchClubs()},[]),e.clubs?r.a.createElement("div",null,r.a.createElement(Ot,{clubs:e.clubs})):r.a.createElement("p",null,"Loading")});function wt(e){return r.a.createElement("ul",null,e.club.students.map(function(e){return r.a.createElement("li",null,e.name)}))}var kt=Object(h.b)(function(e,t){return{club:t.club}},function(e){return{setClub:function(t){e(function(e){return{type:St,club:e}}(t))}}})(function(e){var t=Object(a.useState)(null),n=Object(z.a)(t,2),c=n[0],i=n[1];return Object(a.useEffect)(function(){e.setClub(e.club),fetch("".concat(E,"/api/club/").concat(e.club),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("id_token"))}}).then(function(e){return e.json()}).then(function(e){return i(e.data)})},[]),c?r.a.createElement("div",null,r.a.createElement("h2",null,c.name),r.a.createElement(wt,{club:c})):null}),_t=Object(h.b)(function(e){return{isAuthenticated:e.user.isAuthenticated}},function(e){return{signIn:function(t,n){e(k(t,n))}}})(function(e){var t=je(""),n=je("");return e.isAuthenticated?r.a.createElement(oe.a,{to:"/timesheet"}):r.a.createElement("div",{className:"p-4 border shadow-md w-64"},r.a.createElement("h2",{className:"mb-4"},"Sign In"),r.a.createElement("form",{onSubmit:function(a){a.preventDefault(),e.signIn(t.value,n.value)}},r.a.createElement("label",{className:"block"},"Email"),r.a.createElement("input",Object.assign({className:"p-2 mb-4 border rounded",type:"text"},t)),r.a.createElement("label",{className:"block"},"Password"),r.a.createElement("input",Object.assign({className:"p-2 mb-4 border rounded",type:"password"},n)),r.a.createElement("button",{className:"block p-2 border rounded",type:"submit"},"Sign In")))}),Tt=Object(h.b)(function(e){return{isAuthenticated:e.user.isAuthenticated}},function(e){return{signUp:function(t,n){e(F(t,n))}}})(function(e){var t=je(""),n=je("");return e.isAuthenticated?r.a.createElement(oe.a,{to:"/timesheet"}):r.a.createElement("div",{className:"p-4 border shadow-md w-64"},r.a.createElement("h2",{className:"mb-4"},"Sign Up"),r.a.createElement("form",{onSubmit:function(a){a.preventDefault(),e.signUp(t.value,n.value)}},r.a.createElement("label",{className:"block"},"Email"),r.a.createElement("input",Object.assign({className:"p-2 mb-4 border rounded",type:"text"},t)),r.a.createElement("label",{className:"block"},"Password"),r.a.createElement("input",Object.assign({className:"p-2 mb-4 border rounded",type:"password"},n)),r.a.createElement("button",{className:"block p-2 border rounded",type:"submit"},"Sign Up")))}),Ft=function(e){function t(){return Object(o.a)(this,t),Object(s.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement(d.a,null,r.a.createElement("div",{style:{fontFamily:["Roboto","sans-serif"]}},r.a.createElement(P,null),r.a.createElement("div",{className:"lg:ml-64 ml-16 p-4 bg-white relative z-10"},r.a.createElement(f.a,{exact:!0,path:"/pinlookup",render:function(){return r.a.createElement(re,null)}}),r.a.createElement(f.a,{exact:!0,path:"/addstudent",render:function(){return r.a.createElement(p,null,r.a.createElement(ce,null))}}),r.a.createElement(f.a,{exact:!0,path:"/timesheet/",render:function(){return r.a.createElement(p,null,r.a.createElement(ve,null))}}),r.a.createElement(f.a,{exact:!0,path:"/timesheet/new",render:function(){return r.a.createElement(p,null,r.a.createElement(se,null))}}),r.a.createElement(f.a,{exact:!0,path:"/timesheet/id/:id",render:function(e){var t=e.match;return r.a.createElement(p,null,r.a.createElement(Qe,{timesheet:t.params.id}))}}),r.a.createElement(f.a,{exact:!0,path:"/family",render:function(){return r.a.createElement(p,null,r.a.createElement(nt,null))}}),r.a.createElement(f.a,{exact:!0,path:"/family/:id",render:function(e){var t=e.match;return r.a.createElement(p,null,r.a.createElement(ot,{family:t.params.id}))}}),r.a.createElement(f.a,{exact:!0,path:"/student/:id",render:function(e){var t=e.match;return r.a.createElement(p,null,r.a.createElement(gt,{student:t.params.id}))}}),r.a.createElement(f.a,{exact:!0,path:"/club",render:function(){return r.a.createElement(p,null,r.a.createElement(xt,null))}}),r.a.createElement(f.a,{exact:!0,path:"/club/:id",render:function(e){var t=e.match;return r.a.createElement(kt,{club:t.params.id})}}),r.a.createElement(f.a,{exact:!0,path:"/signin",render:function(){return r.a.createElement(_t,null)}}),r.a.createElement(f.a,{exact:!0,path:"/signup",render:function(){return r.a.createElement(Tt,null)}}))))}}]),t}(a.Component),Ct=n(19),It=n(92),At=n(4),Dt={library:[],gym:[]};var Ut={isFetching:!1,students:[]};var Pt={isFetching:!1,fetchedTimesheets:[],timesheet:""};var zt={families:[],isFetching:!1};var Bt={clubs:[],isFetching:!1};var Mt={isAuthenticated:!!localStorage.getItem("id_token"),isFetching:!!localStorage.getItem("id_token")};var Lt=Object(Ct.c)({postcareLocations:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Dt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case L:return Object(At.a)({},e,{library:[].concat(Object(Fe.a)(e.library),[{name:t.student.name,grade:t.student.grade,pin:t.student.pin,present:!0}])});case R:return Object(At.a)({},e,{library:e.library.map(function(e){return e.name===t.student.name?Object(At.a)({},e,{present:!e.present}):e})});case G:return Object(At.a)({},e,{gym:[].concat(Object(Fe.a)(e.gym),[{name:t.student.name,grade:t.student.grade,pin:t.student.pin,present:!0}])});case H:return Object(At.a)({},e,{gym:e.gym.map(function(e){return e.name===t.student.name?Object(At.a)({},e,{present:!e.present}):e})});default:return e}},student:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ut,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case $:return Object(At.a)({},e,{isFetching:!0});case ee:return Object(At.a)({},e,{students:t.students,isFetching:!1});case te:return Object(At.a)({},e,{isFetching:!1});case ne:return Object(At.a)({},e,{id:t.student});default:return e}},timesheets:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case me:return Object(At.a)({},e,{isFetching:!0});case de:return Object(At.a)({},e,{fetchedTimesheets:t.timesheets,isFetching:!1});case fe:return Object(At.a)({},e,{isFetching:!1});case be:return Object(At.a)({},e,{timesheet:t.timesheet});default:return e}},family:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:zt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ve:return Object(At.a)({},e,{isFetching:!0});case qe:return Object(At.a)({},e,{families:t.families,isFetching:!1});case Ze:return Object(At.a)({},e,{isFetching:!1});case Xe:return Object(At.a)({},e,{id:t.family});default:return e}},club:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Bt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case vt:return Object(At.a)({},e,{isFetching:!0});case yt:return Object(At.a)({},e,{clubs:t.clubs,isFetching:!1});case Nt:return Object(At.a)({},e,{isFetching:!1});case St:return Object(At.a)({},e,{id:t.club});default:return e}},user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Mt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case g:return Object(At.a)({},e,{isFetching:!0});case v:return Object(At.a)({},e,{data:t.data,isFetching:!1,isAuthenticated:!0});case y:return Object(At.a)({},e,{isAuthenticated:!1,isFetching:!1,error:t.error});case N:return Object(At.a)({},e,{isFetching:!0});case S:return Object(At.a)({},e,{data:t.data,isFetching:!1,isAuthenticated:!0});case j:return Object(At.a)({},e,{isAuthenticated:!1,isFetching:!1,error:t.error});case O:return Object(At.a)({},e,{isAuthenticated:!1,data:{}});default:return e}}}),Rt=Object(Ct.d)(Lt,Object(Ct.a)(It.a));Rt.subscribe(function(){return console.log(Rt.getState())}),i.a.render(r.a.createElement(h.a,{store:Rt},r.a.createElement(Ft,null)),document.getElementById("root"))},22:function(e,t,n){e.exports={container:"Student_container__3Z43m",name:"Student_name__14yS4",pin:"Student_pin__3mGAp",grade:"Student_grade__1oTxg",club:"Student_club__3qKK_",location:"Student_location__3h9nf",row:"Student_row__3PcnS",btn:"Student_btn__xE-0N",borderBottom:"Student_borderBottom__2Dv-Y"}},51:function(e,t,n){e.exports={container:"StudentList_container__1NJ7x"}},98:function(e,t,n){e.exports=n(219)}},[[98,1,2]]]);
//# sourceMappingURL=main.6e472174.chunk.js.map